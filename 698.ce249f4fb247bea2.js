"use strict";(self.webpackChunksaiph=self.webpackChunksaiph||[]).push([[698],{9698:(k,m,s)=>{s.r(m),s.d(m,{LoginPageModule:()=>F});var u=s(177),r=s(4341),p=s(6143),f=s(467),b=s(8032),h=s.n(b),n=s(540),P=s(9389);function M(e,c){1&e&&(n.j41(0,"div",23),n.EFF(1," Ingresa un correo v\xe1lido "),n.k0s())}function C(e,c){1&e&&(n.j41(0,"div",23),n.EFF(1," La contrase\xf1a es requerida "),n.k0s())}function O(e,c){1&e&&(n.j41(0,"span"),n.EFF(1,"Iniciar Sesi\xf3n"),n.k0s())}function x(e,c){1&e&&(n.j41(0,"span"),n.nrm(1,"span",24),n.EFF(2," Iniciando... "),n.k0s())}function v(e,c){if(1&e&&(n.j41(0,"div",25),n.nrm(1,"i",26),n.EFF(2),n.k0s()),2&e){const o=n.XpG();n.R7$(2),n.SpI(" ",o.errorMessage," ")}}const _=[{path:"",component:(()=>{class e{constructor(o,i,t){this.fb=o,this.router=i,this.firebaseService=t,this.showPassword=!1,this.isLoading=!1,this.errorMessage=""}ngOnInit(){this.initForm(),this.checkIfLoggedIn()}initForm(){this.loginForm=this.fb.group({email:["",[r.k0.required,r.k0.email]],password:["",[r.k0.required,r.k0.minLength(6)]]})}checkIfLoggedIn(){localStorage.getItem("currentUser")&&this.router.navigate(["/private/dashboard"])}togglePassword(){this.showPassword=!this.showPassword}onLogin(){var o=this;return(0,f.A)(function*(){if(o.loginForm.invalid)o.loginForm.markAllAsTouched();else{o.isLoading=!0,o.errorMessage="";try{const i=o.loginForm.value.email,t=o.loginForm.value.password,l=yield o.firebaseService.queryDocuments("usuarios","email","==",i);if(0===l.length)return o.errorMessage="Usuario no encontrado",void(o.isLoading=!1);const a=l[0];if(a.password!==t)return o.errorMessage="Contrase\xf1a incorrecta",void(o.isLoading=!1);localStorage.setItem("currentUser",JSON.stringify({id:a.id,nombre:a.nombre,email:a.email,rol:a.rol})),yield h().fire({icon:"success",title:"\xa1Bienvenido!",text:`Hola ${a.nombre}`,timer:1500,showConfirmButton:!1}),o.router.navigate(["/private/dashboard"])}catch(i){console.error("Error en login:",i),o.errorMessage="Error al iniciar sesi\xf3n. Intenta nuevamente."}finally{o.isLoading=!1}}})()}static{this.\u0275fac=function(i){return new(i||e)(n.rXU(r.ok),n.rXU(p.Ix),n.rXU(P.f))}}static{this.\u0275cmp=n.VBU({type:e,selectors:[["app-login-page"]],decls:35,vars:15,consts:[[1,"login-container"],[1,"login-card"],[1,"login-header"],[1,"logo-container"],[1,"bi","bi-shield-fill-check"],[1,"login-title"],[1,"login-subtitle"],[3,"formGroup","ngSubmit"],[1,"form-group"],[1,"form-label"],[1,"input-wrapper"],[1,"bi","bi-envelope","input-icon"],["type","email","placeholder","usuario@ejemplo.com","formControlName","email",1,"form-control-login"],["class","invalid-feedback",4,"ngIf"],[1,"bi","bi-lock","input-icon"],["placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","formControlName","password",1,"form-control-login",3,"type"],["type","button",1,"password-toggle",3,"click"],["type","submit",1,"btn-login",3,"disabled"],[4,"ngIf"],["class","error-message",4,"ngIf"],[1,"login-footer"],[1,"text-muted"],[1,"bi","bi-info-circle","me-1"],[1,"invalid-feedback"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"],[1,"error-message"],[1,"bi","bi-exclamation-circle","me-2"]],template:function(i,t){if(1&i&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),n.nrm(4,"i",4),n.k0s(),n.j41(5,"h2",5),n.EFF(6,"Saiph"),n.k0s(),n.j41(7,"p",6),n.EFF(8,"Sistema de Evaluaci\xf3n de Guias Mayores"),n.k0s()(),n.j41(9,"form",7),n.bIt("ngSubmit",function(){return t.onLogin()}),n.j41(10,"div",8)(11,"label",9),n.EFF(12,"Correo Electr\xf3nico"),n.k0s(),n.j41(13,"div",10),n.nrm(14,"i",11)(15,"input",12),n.k0s(),n.DNE(16,M,2,0,"div",13),n.k0s(),n.j41(17,"div",8)(18,"label",9),n.EFF(19,"Contrase\xf1a"),n.k0s(),n.j41(20,"div",10),n.nrm(21,"i",14)(22,"input",15),n.j41(23,"button",16),n.bIt("click",function(){return t.togglePassword()}),n.nrm(24,"i"),n.k0s()(),n.DNE(25,C,2,0,"div",13),n.k0s(),n.j41(26,"div",8)(27,"button",17),n.DNE(28,O,2,0,"span",18),n.DNE(29,x,3,0,"span",18),n.k0s()(),n.DNE(30,v,3,1,"div",19),n.k0s(),n.j41(31,"div",20)(32,"p",21),n.nrm(33,"i",22),n.EFF(34," Contacta al administrador si tienes problemas para acceder "),n.k0s()()()()),2&i){let l,a,g,d;n.R7$(9),n.Y8G("formGroup",t.loginForm),n.R7$(6),n.AVh("is-invalid",(null==(l=t.loginForm.get("email"))?null:l.invalid)&&(null==(l=t.loginForm.get("email"))?null:l.touched)),n.R7$(1),n.Y8G("ngIf",(null==(a=t.loginForm.get("email"))?null:a.invalid)&&(null==(a=t.loginForm.get("email"))?null:a.touched)),n.R7$(6),n.AVh("is-invalid",(null==(g=t.loginForm.get("password"))?null:g.invalid)&&(null==(g=t.loginForm.get("password"))?null:g.touched)),n.Y8G("type",t.showPassword?"text":"password"),n.R7$(1),n.BMQ("aria-label",t.showPassword?"Ocultar contrase\xf1a":"Mostrar contrase\xf1a"),n.R7$(1),n.HbH(t.showPassword?"bi bi-eye-slash":"bi bi-eye"),n.R7$(1),n.Y8G("ngIf",(null==(d=t.loginForm.get("password"))?null:d.invalid)&&(null==(d=t.loginForm.get("password"))?null:d.touched)),n.R7$(2),n.Y8G("disabled",t.loginForm.invalid||t.isLoading),n.R7$(1),n.Y8G("ngIf",!t.isLoading),n.R7$(1),n.Y8G("ngIf",t.isLoading),n.R7$(1),n.Y8G("ngIf",t.errorMessage)}},dependencies:[u.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD],styles:[".login-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg,#1b263b 0%,#465a75 100%);padding:20px}.login-card[_ngcontent-%COMP%]{background:#ffffff;border-radius:16px;box-shadow:0 10px 40px #0003;padding:40px;width:100%;max-width:440px;animation:_ngcontent-%COMP%_slideUp .4s ease}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.login-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:32px}.login-header[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{width:70px;height:70px;margin:0 auto 16px;background:linear-gradient(135deg,#1b263b 0%,#465a75 100%);border-radius:16px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #1b263b4d}.login-header[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2.5rem;color:#fff}.login-header[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-size:2rem;font-weight:700;color:#1b263b;margin-bottom:8px}.login-header[_ngcontent-%COMP%]   .login-subtitle[_ngcontent-%COMP%]{font-size:.95rem;color:#5b6a7c;margin:0}.form-group[_ngcontent-%COMP%]{margin-bottom:24px}.form-label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:600;color:#1b263b;margin-bottom:8px}.input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.input-wrapper[_ngcontent-%COMP%]   .input-icon[_ngcontent-%COMP%]{position:absolute;left:14px;font-size:18px;color:#5b6a7c;pointer-events:none}.input-wrapper[_ngcontent-%COMP%]   .form-control-login[_ngcontent-%COMP%]{width:100%;height:48px;padding:0 48px 0 44px;border:2px solid #e0e1dd;border-radius:10px;font-size:15px;color:#1b263b;background-color:#fff;transition:all .2s ease}.input-wrapper[_ngcontent-%COMP%]   .form-control-login[_ngcontent-%COMP%]::placeholder{color:#8b97a6}.input-wrapper[_ngcontent-%COMP%]   .form-control-login[_ngcontent-%COMP%]:focus{outline:none;border-color:#465a75;box-shadow:0 0 0 4px #465a751a}.input-wrapper[_ngcontent-%COMP%]   .form-control-login.is-invalid[_ngcontent-%COMP%]{border-color:#e05656}.input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]{position:absolute;right:12px;background:transparent;border:none;color:#5b6a7c;cursor:pointer;padding:8px;display:flex;align-items:center;justify-content:center;transition:color .2s ease}.input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]:hover{color:#1b263b}.input-wrapper[_ngcontent-%COMP%]   .password-toggle[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}.invalid-feedback[_ngcontent-%COMP%]{display:block;color:#e05656;font-size:.875rem;margin-top:6px}.btn-login[_ngcontent-%COMP%]{width:100%;height:48px;background:linear-gradient(135deg,#1b263b 0%,#465a75 100%);color:#fff;border:none;border-radius:10px;font-size:16px;font-weight:600;cursor:pointer;transition:all .3s ease;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 12px #1b263b4d}.btn-login[_ngcontent-%COMP%]:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 16px #1b263b66}.btn-login[_ngcontent-%COMP%]:active:not(:disabled){transform:translateY(0)}.btn-login[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}.error-message[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background-color:#fff5f5;border:1px solid #ffcdd2;border-radius:8px;color:#e05656;font-size:.9rem;display:flex;align-items:center;animation:_ngcontent-%COMP%_shake .4s ease}.error-message[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:18px}@keyframes _ngcontent-%COMP%_shake{0%,to{transform:translate(0)}25%{transform:translate(-5px)}75%{transform:translate(5px)}}.login-footer[_ngcontent-%COMP%]{margin-top:32px;text-align:center}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem;color:#5b6a7c;margin:0}.login-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}@media (max-width: 576px){.login-card[_ngcontent-%COMP%]{padding:32px 24px}.login-header[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]{width:60px;height:60px}.login-header[_ngcontent-%COMP%]   .logo-container[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:2rem}.login-header[_ngcontent-%COMP%]   .login-title[_ngcontent-%COMP%]{font-size:1.75rem}.login-header[_ngcontent-%COMP%]   .login-subtitle[_ngcontent-%COMP%]{font-size:.875rem}.form-control-login[_ngcontent-%COMP%]{height:44px;font-size:14px}.btn-login[_ngcontent-%COMP%]{height:44px;font-size:15px}}"]})}}return e})()}];let w=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=n.$C({type:e})}static{this.\u0275inj=n.G2t({imports:[p.iI.forChild(_),p.iI]})}}return e})(),F=(()=>{class e{static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275mod=n.$C({type:e})}static{this.\u0275inj=n.G2t({imports:[u.MD,r.YN,r.X1,w]})}}return e})()}}]);