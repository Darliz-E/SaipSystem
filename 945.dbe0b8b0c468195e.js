"use strict";(self.webpackChunksaiph=self.webpackChunksaiph||[]).push([[945],{9945:(G,v,s)=>{s.r(v),s.d(v,{ClubesPageModule:()=>N});var F=s(6778),i=s(4341),C=s(177),_=s(6143),u=s(467),M=s(8032),c=s.n(M),e=s(540),k=s(9389);function E(n,a){if(1&n){const t=e.RV6();e.j41(0,"div",42)(1,"div",43)(2,"div",44)(3,"h5",45),e.EFF(4),e.k0s(),e.j41(5,"div",46)(6,"div",3),e.nrm(7,"i",47),e.j41(8,"span",48),e.EFF(9),e.k0s()()(),e.j41(10,"div",46)(11,"div",3),e.nrm(12,"i",49),e.j41(13,"span",50)(14,"strong",51),e.EFF(15),e.k0s(),e.j41(16,"small",52),e.EFF(17," Miembros "),e.k0s()()()(),e.j41(18,"div",2)(19,"div",3),e.nrm(20,"i",53),e.j41(21,"span",52),e.EFF(22),e.k0s()()(),e.j41(23,"div",39)(24,"div",3)(25,"button",54),e.bIt("click",function(){const l=e.eBV(t).$implicit,d=e.XpG(2);return e.Njj(d.editClub(l))}),e.EFF(26," Editar "),e.k0s(),e.j41(27,"button",55),e.bIt("click",function(){const l=e.eBV(t).$implicit,d=e.XpG(2);return e.Njj(d.confirmDelete(l))}),e.nrm(28,"i",56),e.k0s()()()()()()}if(2&n){const t=a.$implicit;e.R7$(4),e.JRh(t.nombre),e.R7$(5),e.SpI(" ",t.zona," "),e.R7$(6),e.JRh(t.cantidadMiembros),e.R7$(7),e.SpI(" Director: ",t.director," ")}}function x(n,a){1&n&&(e.j41(0,"div",57)(1,"div",58),e.nrm(2,"i",59),e.j41(3,"p",60),e.EFF(4,"No se encontraron clubes"),e.k0s()()())}function P(n,a){if(1&n&&(e.j41(0,"div",39),e.DNE(1,E,29,4,"div",40),e.DNE(2,x,5,0,"div",41),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.filteredClubes),e.R7$(1),e.Y8G("ngIf",0===t.filteredClubes.length)}}function w(n,a){1&n&&(e.j41(0,"div",39)(1,"div",61)(2,"div",62)(3,"span",63),e.EFF(4,"Cargando..."),e.k0s()(),e.j41(5,"p",60),e.EFF(6,"Cargando clubes..."),e.k0s()()())}function y(n,a){1&n&&(e.j41(0,"div",64),e.EFF(1," El nombre del club es requerido "),e.k0s())}function z(n,a){if(1&n&&(e.j41(0,"option",65),e.EFF(1),e.k0s()),2&n){const t=a.$implicit;e.Y8G("value",t),e.R7$(1),e.JRh(t)}}function I(n,a){1&n&&(e.j41(0,"div",64),e.EFF(1," La zona es requerida "),e.k0s())}function j(n,a){1&n&&(e.j41(0,"div",64),e.EFF(1," La cantidad de miembros es requerida "),e.k0s())}function O(n,a){1&n&&(e.j41(0,"div",64),e.EFF(1," El nombre del director es requerido "),e.k0s())}function R(n,a){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(t.isEditMode?"Actualizar":"Crear Club")}}function $(n,a){1&n&&(e.j41(0,"span"),e.nrm(1,"span",66),e.EFF(2," Guardando... "),e.k0s())}const T=[{path:"",component:(()=>{class n{constructor(t,r){this.fb=t,this.firebaseService=r,this.clubes=[],this.filteredClubes=[],this.searchTerm="",this.isLoading=!1,this.isLoadingClubes=!0,this.isEditMode=!1,this.currentClubId=null,this.zonas=["Zona 1","Zona 2","Zona 3","Zona 4","Zona 5","Zona 6","Zona 7","Zona 8","Zona 9","Zona 10","Zona 11"]}ngOnInit(){this.initForm(),this.loadClubes(),this.setupModalListeners()}initForm(){this.clubForm=this.fb.group({nombre:["",[i.k0.required,i.k0.minLength(3)]],zona:["",i.k0.required],cantidadMiembros:[0,[i.k0.required,i.k0.min(0)]],director:["",[i.k0.required,i.k0.minLength(3)]]})}setupModalListeners(){const t=document.getElementById("clubModal");t&&(t.addEventListener("show.bs.modal",()=>{this.modalInstance||(this.modalInstance=bootstrap.Modal.getInstance(t))}),t.addEventListener("hidden.bs.modal",()=>{this.isLoading||(this.clubForm.reset(),this.isEditMode=!1,this.currentClubId=null)}))}loadClubes(){var t=this;return(0,u.A)(function*(){try{t.isLoadingClubes=!0;const r=yield t.firebaseService.getDocuments("clubes");t.clubes=r,t.filteredClubes=[...t.clubes]}catch(r){console.error("Error cargando clubes:",r),c().fire({icon:"error",title:"Error",text:"No se pudieron cargar los clubes"})}finally{t.isLoadingClubes=!1}})()}filterClubes(){const t=this.searchTerm.toLowerCase().trim();this.filteredClubes=t?this.clubes.filter(r=>r.nombre.toLowerCase().includes(t)||r.zona.toLowerCase().includes(t)||r.director.toLowerCase().includes(t)):[...this.clubes]}openModal(){this.isEditMode=!1,this.currentClubId=null,this.clubForm.reset();const t=document.getElementById("clubModal");t&&(this.modalInstance=new bootstrap.Modal(t),this.modalInstance.show())}editClub(t){this.isEditMode=!0,this.currentClubId=t.id||null,this.clubForm.patchValue({nombre:t.nombre,zona:t.zona,cantidadMiembros:t.cantidadMiembros,director:t.director});const r=document.getElementById("clubModal");r&&(this.modalInstance=new bootstrap.Modal(r),this.modalInstance.show())}saveClub(){var t=this;return(0,u.A)(function*(){if(t.clubForm.invalid)t.clubForm.markAllAsTouched();else{t.isLoading=!0;try{const r={nombre:t.clubForm.value.nombre,zona:t.clubForm.value.zona,cantidadMiembros:Number(t.clubForm.value.cantidadMiembros),director:t.clubForm.value.director,updatedAt:new Date};if(t.isEditMode&&t.currentClubId)yield t.firebaseService.updateDocument("clubes",t.currentClubId,r),c().fire({icon:"success",title:"Club actualizado",text:"El club se actualiz\xf3 correctamente",timer:2e3,showConfirmButton:!1});else{const o={...r,createdAt:new Date};yield t.firebaseService.addDocument("clubes",o),c().fire({icon:"success",title:"Club creado",text:"El club se cre\xf3 correctamente",timer:2e3,showConfirmButton:!1})}t.closeModal(),yield t.loadClubes()}catch(r){console.error("Error guardando club:",r),c().fire({icon:"error",title:"Error",text:"No se pudo guardar el club"})}finally{t.isLoading=!1}}})()}confirmDelete(t){var r=this;return(0,u.A)(function*(){(yield c().fire({title:"\xbfEliminar club?",html:`\xbfEst\xe1s seguro de eliminar el club <strong>"${t.nombre}"</strong>?<br><br>Esta acci\xf3n no se puede deshacer y se eliminar\xe1n todas las evaluaciones asociadas.`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#a80b0b",cancelButtonColor:"#6c757d",confirmButtonText:"S\xed, eliminar",cancelButtonText:"Cancelar"})).isConfirmed&&t.id&&(yield r.deleteClub(t.id))})()}deleteClub(t){var r=this;return(0,u.A)(function*(){try{yield r.firebaseService.deleteDocument("clubes",t),c().fire({icon:"success",title:"Club eliminado",text:"El club se elimin\xf3 correctamente",timer:2e3,showConfirmButton:!1}),yield r.loadClubes()}catch(o){console.error("Error eliminando club:",o),c().fire({icon:"error",title:"Error",text:"No se pudo eliminar el club"})}})()}closeModal(){this.clubForm.reset(),this.isEditMode=!1,this.currentClubId=null;const t=document.getElementById("clubModal");if(t){if(this.modalInstance)this.modalInstance.hide();else{const o=bootstrap.Modal.getInstance(t);o&&o.hide()}const r=document.querySelector(".modal-backdrop");r&&r.remove(),document.body.classList.remove("modal-open"),document.body.style.removeProperty("overflow"),document.body.style.removeProperty("padding-right")}}static{this.\u0275fac=function(r){return new(r||n)(e.rXU(i.ok),e.rXU(k.f))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-clubes-page"]],decls:58,vars:22,consts:[[1,"py-4"],[1,"fw-bold",2,"color","#1b263b"],[1,"row"],[1,"col"],[2,"color","rgb(79, 81, 83)"],[1,"row","align-items-center","mt-3","mb-4"],[1,"col-12","col-md-8","col-lg-6","mb-3","mb-md-0"],[1,"search-container"],["type","text","placeholder","Buscar por nombre, zona o director...",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"col-12","col-md-4","col-lg-6","text-md-end"],[1,"btn-club",3,"click"],[1,"bi","bi-plus"],["class","row mt-4",4,"ngIf"],["id","clubModal","data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1","aria-labelledby","clubModalLabel","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog"],[1,"modal-content"],[1,"modal-header","border-0","pb-0"],[1,"w-100"],["id","clubModalLabel",1,"modal-title","fs-5","mb-0"],[1,"d-block","text-muted","small","mt-1"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"mb-3"],["for","clubName",1,"form-label"],["type","text","placeholder","Ej: \xc1guilas Doradas","formControlName","nombre",1,"form-control-control"],["class","invalid-feedback",4,"ngIf"],["for","zona",1,"form-label"],["formControlName","zona",1,"form-control-control"],["value","","disabled",""],[3,"value",4,"ngFor","ngForOf"],["for","cantidadMiembros",1,"form-label"],["type","number","placeholder","Ej: 25","min","0","max","500","formControlName","cantidadMiembros",1,"form-control-control"],["for","director",1,"form-label"],["type","text","placeholder","Ej: Juan P\xe9rez","formControlName","director",1,"form-control-control"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn-editar",3,"click"],["type","button",1,"btn-actualizar",3,"disabled","click"],[4,"ngIf"],[1,"row","mt-4"],["class","col-12 mb-4 col-md-4",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"col-12","mb-4","col-md-4"],[1,"card"],[1,"card-body"],[1,"mb-4",2,"font-size","1.2rem"],[1,"row","mb-2"],[1,"bi","bi-geo-alt","me-2"],[2,"color","rgb(80, 80, 80)","font-weight","500"],[1,"bi","bi-people","me-2"],[2,"color","rgb(80, 80, 80)"],[2,"margin-right","4px"],[2,"color","rgb(80, 80, 80)","font-weight","400","font-size","medium"],[1,"bi","bi-person","me-2"],[1,"btn-editar",3,"click"],[1,"btn-delete","btn-sm","ms-2",3,"click"],[1,"bi","bi-trash"],[1,"col-12"],[1,"text-center","py-5"],[1,"bi","bi-inbox",2,"font-size","3rem","color","#8b97a6"],[1,"text-muted","mt-3"],[1,"col-12","text-center","py-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"invalid-feedback"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(r,o){if(1&r&&(e.j41(0,"div",0)(1,"h2",1),e.EFF(2,"Gesti\xf3n de Clubes"),e.k0s(),e.j41(3,"div",2)(4,"div",3)(5,"p",4),e.EFF(6," Administra los clubes de conquistadores registrados en el sistema "),e.k0s()()(),e.j41(7,"div",5)(8,"div",6)(9,"div",7)(10,"input",8),e.bIt("ngModelChange",function(d){return o.searchTerm=d})("input",function(){return o.filterClubes()}),e.k0s()()(),e.j41(11,"div",9)(12,"button",10),e.bIt("click",function(){return o.openModal()}),e.nrm(13,"i",11),e.EFF(14," Agregar Club "),e.k0s()()(),e.DNE(15,P,3,2,"div",12),e.DNE(16,w,7,0,"div",12),e.k0s(),e.j41(17,"div",13)(18,"div",14)(19,"div",15)(20,"div",16)(21,"div",17)(22,"h6",18),e.EFF(23),e.k0s(),e.j41(24,"span",19),e.EFF(25),e.k0s()(),e.j41(26,"button",20),e.bIt("click",function(){return o.closeModal()}),e.k0s()(),e.j41(27,"div",21)(28,"form",22)(29,"div",23)(30,"label",24),e.EFF(31,"Nombre del Club"),e.k0s(),e.nrm(32,"input",25),e.DNE(33,y,2,0,"div",26),e.k0s(),e.j41(34,"div",23)(35,"label",27),e.EFF(36,"Zona"),e.k0s(),e.j41(37,"select",28)(38,"option",29),e.EFF(39,"Selecciona una zona"),e.k0s(),e.DNE(40,z,2,2,"option",30),e.k0s(),e.DNE(41,I,2,0,"div",26),e.k0s(),e.j41(42,"div",23)(43,"label",31),e.EFF(44," Cantidad de Miembros "),e.k0s(),e.nrm(45,"input",32),e.DNE(46,j,2,0,"div",26),e.k0s(),e.j41(47,"div",23)(48,"label",33),e.EFF(49," Nombre del Director "),e.k0s(),e.nrm(50,"input",34),e.DNE(51,O,2,0,"div",26),e.k0s()()(),e.j41(52,"div",35)(53,"button",36),e.bIt("click",function(){return o.closeModal()}),e.EFF(54," Cancelar "),e.k0s(),e.j41(55,"button",37),e.bIt("click",function(){return o.saveClub()}),e.DNE(56,R,2,1,"span",38),e.DNE(57,$,3,0,"span",38),e.k0s()()()()()),2&r){let l,d,b,m,f,p,g,h;e.R7$(10),e.Y8G("ngModel",o.searchTerm),e.R7$(5),e.Y8G("ngIf",!o.isLoadingClubes),e.R7$(1),e.Y8G("ngIf",o.isLoadingClubes),e.R7$(7),e.SpI(" ",o.isEditMode?"Editar Club":"Agregar Nuevo Club"," "),e.R7$(2),e.SpI(" ",o.isEditMode?"Actualiza la informaci\xf3n del club":"Registra un nuevo club en el sistema"," "),e.R7$(3),e.Y8G("formGroup",o.clubForm),e.R7$(4),e.AVh("is-invalid",(null==(l=o.clubForm.get("nombre"))?null:l.invalid)&&(null==(l=o.clubForm.get("nombre"))?null:l.touched)),e.R7$(1),e.Y8G("ngIf",(null==(d=o.clubForm.get("nombre"))?null:d.invalid)&&(null==(d=o.clubForm.get("nombre"))?null:d.touched)),e.R7$(4),e.AVh("is-invalid",(null==(b=o.clubForm.get("zona"))?null:b.invalid)&&(null==(b=o.clubForm.get("zona"))?null:b.touched)),e.R7$(3),e.Y8G("ngForOf",o.zonas),e.R7$(1),e.Y8G("ngIf",(null==(m=o.clubForm.get("zona"))?null:m.invalid)&&(null==(m=o.clubForm.get("zona"))?null:m.touched)),e.R7$(4),e.AVh("is-invalid",(null==(f=o.clubForm.get("cantidadMiembros"))?null:f.invalid)&&(null==(f=o.clubForm.get("cantidadMiembros"))?null:f.touched)),e.R7$(1),e.Y8G("ngIf",(null==(p=o.clubForm.get("cantidadMiembros"))?null:p.invalid)&&(null==(p=o.clubForm.get("cantidadMiembros"))?null:p.touched)),e.R7$(4),e.AVh("is-invalid",(null==(g=o.clubForm.get("director"))?null:g.invalid)&&(null==(g=o.clubForm.get("director"))?null:g.touched)),e.R7$(1),e.Y8G("ngIf",(null==(h=o.clubForm.get("director"))?null:h.invalid)&&(null==(h=o.clubForm.get("director"))?null:h.touched)),e.R7$(4),e.Y8G("disabled",o.clubForm.invalid||o.isLoading),e.R7$(1),e.Y8G("ngIf",!o.isLoading),e.R7$(1),e.Y8G("ngIf",o.isLoading)}},dependencies:[C.Sq,C.bT,i.qT,i.xH,i.y7,i.me,i.Q0,i.wz,i.BC,i.cb,i.VZ,i.zX,i.j4,i.JD,i.vS],styles:[".form-control[_ngcontent-%COMP%]{height:40px;width:100%;border-radius:9px;border:1px solid #b9c5d0;background-color:#e0e1de;font-size:15px}.form-control[_ngcontent-%COMP%]::placeholder{color:#556371;font-size:14px;font-weight:500}.form-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#465a75;box-shadow:0 0 0 3px #465a7526;background-color:#fff}.btn-club[_ngcontent-%COMP%]{height:40px;padding:0 20px;border-radius:9px;background-color:#1b263b;font-size:14px;font-weight:500;color:#e3e6eb;border:none;cursor:pointer;transition:all .2s ease;white-space:nowrap}.btn-club[_ngcontent-%COMP%]:hover{background-color:#465a75;transform:translateY(-1px);box-shadow:0 2px 8px #1b263b33}.btn-club[_ngcontent-%COMP%]:active{transform:translateY(0)}.btn-club[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:6px}@media (max-width: 767.98px){.btn-club[_ngcontent-%COMP%]{width:100%}}.search-container[_ngcontent-%COMP%]{position:relative;width:100%}.search-container[_ngcontent-%COMP%]:before{content:\"\\f52a\";font-family:bootstrap-icons;position:absolute;left:14px;top:50%;transform:translateY(-50%);color:#6c757d;font-size:1rem;pointer-events:none;z-index:1}.search-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:40px}.btn-editar[_ngcontent-%COMP%]{height:35px;width:25%;border-radius:9px;border:1px solid #e0e1dd;background-color:#e0e1ddd6;font-size:14px;font-weight:500;color:#4b4a4a}.btn-editar[_ngcontent-%COMP%]:hover{background-color:#58678db4}.btn-delete[_ngcontent-%COMP%]{height:35px;width:14%;border-radius:9px;border:1px solid #e0e1dd;background-color:#fff;font-size:14px;font-weight:500;color:#0c0c0c}.btn-delete[_ngcontent-%COMP%]:hover{background-color:#c061615b}.btn-delete[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#a80b0b;font-size:16px}.modal-title[_ngcontent-%COMP%]{font-weight:500}.modal-header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:block!important;color:#36526e!important;font-size:15px!important;font-weight:400;margin-top:2px!important}.form-label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#000}.form-control-control[_ngcontent-%COMP%]{height:35px;width:100%;border-radius:9px;border:1px solid #c3bcbc;background-color:#fff;font-size:15px;padding-left:10px}.form-control-control[_ngcontent-%COMP%]::placeholder{color:#36526e;font-size:14px;font-weight:500}.form-control-control[_ngcontent-%COMP%]:focus{outline:none;border-color:#465a75;box-shadow:0 0 0 3px #465a7526}select.form-control-control[_ngcontent-%COMP%]{cursor:pointer;padding-right:30px;appearance:none;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2336526e' d='M6 9L1 4h10z'/%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:right 10px center}.is-invalid[_ngcontent-%COMP%]{border-color:#a80b0b!important}.invalid-feedback[_ngcontent-%COMP%]{color:#a80b0b;font-size:.875rem;margin-top:4px;display:block}.btn-actualizar[_ngcontent-%COMP%]{height:35px;width:25%;border-radius:9px;border:1px solid #e0e1dd;background-color:#1b263b;font-size:14px;font-weight:500;color:#fff}.modal-body[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:#36526e}.btn-eliminar[_ngcontent-%COMP%]{height:35px;width:25%;border-radius:9px;border:1px solid #e0e1dd;background-color:#a80b0b;font-size:14px;font-weight:500;color:#fff}.spinner-border-sm[_ngcontent-%COMP%]{width:1rem;height:1rem;border-width:.15em}.card[_ngcontent-%COMP%]{border:1px solid #dcdfe4;border-radius:10px;box-shadow:0 2px 8px #1b263b0d;transition:transform .2s ease,box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #1b263b1a}"]})}}return n})()}];let L=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[_.iI.forChild(T),_.iI]})}}return n})(),N=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[L,F.PrivateModule,C.MD,i.X1,i.YN]})}}return n})()}}]);